{% load i18n staticfiles %}
<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"  lang="en"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Login</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="apple-touch-icon" href="apple-touch-icon.png">
		<link rel="stylesheet" href="{{ STATIC_URL }}dummy/assets/css/style.css">
        <script src="{{ STATIC_URL }}dummy/assets/js/vendor/modernizr-2.8.3-respond-1.4.2.min.js"></script>
		<link href="https://fonts.googleapis.com/css?family=Ubuntu:300,300i,400,400i,500,500i,700,700i" rel="stylesheet">
    </head>
<style>

input,
input::-webkit-input-placeholder {
    font-size: 12px;
    line-height: 3;
}

</style>
    <body>
        <!--[if lt IE 8]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
        <div class="login-wrap">
		  	<div class="login-bg">
		  		<img src="{{ STATIC_URL }}dummy/assets/img/bg-login.png">
		  	</div>
		  	<div class="container-fluid">
		  		<div class="row justify-content-center">
		  			<div class="col-xl-6 col-lg-8">
		  				<div class="login-section">	
		  					<div class="row">
		  						<div class="col-lg-5">
		  							<div class="sec-left text-center">
		  								<a href="#" title="" target="">
		  									<img src="{{ STATIC_URL }}dummy/assets/img/fieldsight.png" alt="fieldsight" height="100">
		  								</a>
		  								<p class="margin-top d-none d-md-block">
		  								FieldSight is the first humanitarian digital platform designed for project monitoring and infrastructure quality assurance. The platform is now being used to monitor more than 50,000 houses.
		  								</p>
		  							</div>
		  						</div>
		  						<div class="col-lg-7">
		  							<div class="sec-right">
										<ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
											<li class="nav-item">
												<a class="nav-link active" id="pills-login-tab" data-toggle="tab" href="#pills-login" role="tab" aria-controls="pills-login" aria-selected="true">Login</a>
											</li>
											<li class="nav-item">
												<a class="nav-link" id="pills-signup-tab" data-toggle="pill" href="#pills-signup" role="tab" aria-controls="pills-signup" aria-selected="false">Signup</a>
											</li>
										</ul>
										<div class="tab-content" id="pills-tabContent">
											<div class="tab-pane fade show active" id="pills-login" role="tabpanel" aria-labelledby="pills-login-tab">
												<form autocomplete="off" method="post" action="/users/accounts/login/">
												{% csrf_token %}
												  	<div class="form-group">
												    	<label for="inputEmail">Email address

														</label>
												    	<input type="username" class="form-control {% if not valid_email %}is-invalid{% endif %}" name="username" id="inputEmail" placeholder="Username or email">
														{% if not valid_email %}
															<div id="emailHelp" class="invalid-feedback">
																User With The Email Doesnot Exist.
															</div>
															{% endif %}
												  	</div>
												  	<div class="form-group">
												    	<label for="inputPassword">Password</label>

												    	<input type="password" name="password" class="form-control {% if password_error %}is-invalid{% endif %}" id="inputPassword" placeholder="e.g., ********">
														{% if password_error %}
															<div id="passwordHelp" class="invalid-feedback">
														  		Incorrect Password ! Please Check Your Password.
															</div>
															{% endif %}
												  	</div>
												  	<div class="row">
												  		<div class="col-sm-6">
												  			<div class="form-group">
														  		<div class="radio">
																  	<input class="checkbox-control" id="inputRemember" type="checkbox" value="" checked="checked">
									    							<label for="inputRemember">Remember me</label>
															  	</div>
														  	</div>
												  		</div>
												  		<div class="col-sm-6">
												  			<div class="form-group">
														  		<p class="help">
																	  <a href="#" title="" id="help-me">Need help?</a>
														  		</p>
														  	</div> 
												  		</div>
												  	</div>
													  <ul class="list-inline">
														<li class="list-inline-item">
															<button type="submit" class="btn btn-secondary" name="login" value="signin"><i class="la la-key"></i> Sign In</button>
														</li>
														<li class="list-inline-item">or use</li>
														<li class="list-inline-item">
															<button type="submit" class="btn btn-secondary" data-toggle="tooltip" data-placement="bottom" title="Facebook"><i class="la la-facebook"></i></button>
														</li>
														<li class="list-inline-item">
															<button type="submit" class="btn btn-secondary" data-toggle="tooltip" data-placement="bottom" title="Google"><i class="la la-google"></i></button>
														</li>
													</ul>
												</form>
											</div>
												<div class="tab-pane" id="pills-signup" role="tabpanel" aria-labelledby="pills-signup-tab">
												<form method="POST" action="/users/signup/">
													{% csrf_token %}
													<div class="form-group">
													    <label for="inputSignupUsername">Username</label>
													    <input type="text" class="form-control {% if signup_form.username.errors %}is-invalid{% endif %}" id="inputSignupUsername" placeholder="e.g., bikrant" name="username" value="{{username}}">
														{% if signup_form.username.errors %}
														{% for error in signup_form.username.errors %}
														<div class="invalid-feedback">
															{{ error|escape }}
													  	</div>
														{% endfor %}
														{% endif %}	
													</div>			
																
													<div class="form-group">
													    <label for="inputSignupFirstName">First Name</label>
													    <input type="text" class="form-control {% if signup_form.first_name.errors %}is-invalid{% endif %}" id="inputSignupFirstName" name="first_name" value="{{first_name}}" placeholder="e.g., John">
														{% if signup_form.first_name.errors %}
														{% for error in signup_form.first_name.errors %}
														<div class="invalid-feedback">
															{{ error|escape }}
													  	</div>
														{% endfor %}
														{% endif %}	
													</div>
													<div class="form-group">
													    <label for="inputSignupLastName">Last Name</label>
													    <input type="text" class="form-control {% if signup_form.last_name.errors %}is-invalid{% endif %}" id="inputSignupLastName" name="last_name" value="{{last_name}}" placeholder="e.g., Doe">
														{% if signup_form.last_name.errors %}
														{% for error in signup_form.last_name.errors %}
														<div class="invalid-feedback">
															{{ error|escape }}
													  	</div>
														{% endfor %}
														{% endif %}	
													</div>
													<div class="form-group">
												    	<label for="inputSignupEmail">Email address</label>
												    	<input type="email" class="form-control {% if signup_form.email.errors %}is-invalid{% endif %}" id="inputSignupEmail" name="email" value="" placeholder="e.g., john@example.com">
														{% if signup_form.email.errors %}
														{% for error in signup_form.email.errors %}
														<div class="invalid-feedback">
															{{ error|escape }}
													  	</div>
														{% endfor %}
														{% endif %}	
													</div>
													<div class="form-group">
													    <label for="inputSignupPassword">Your password</label>
													    <input type="password" class="form-control {% if signup_form.password.errors %}is-invalid{% endif %}" id="inputSignupPassword" name="password" placeholder="e.g., **********">
														{% if signup_form.password.errors %}
														{% for error in signup_form.password.errors %}
														<div class="invalid-feedback">
															{{ error|escape }}
													  	</div>
														{% endfor %}
														{% endif %}	
													</div>
													<div class="form-group">
													    <label for="inputSignupRePassword">One more time?</label>
													    <input type="password" class="form-control {% if signup_form.password1.errors %}is-invalid{% endif %}" id="inputSignupRePassword" name="password1" placeholder="e.g., **********">
														{% if signup_form.password1.errors %}
														{% for error in signup_form.password1.errors %}
														<div class="invalid-feedback">
															{{ error|escape }}
													  	</div>
														{% endfor %}
														{% endif %}	
													</div>
													<!-- <button type="submit" class="btn btn-secondary" name="signup" value="signup"><i class="la la-user-plus"></i> Signup</button> -->
													<p class="mt-3 additional-info">
														By signing up, you’re agreeing with FieldSight’s <a href="#" title="" target="_blank">Terms and Conditions Agreement</a> | <a href="#" title="" target="_blank">Privacy Policy</a>.
													</p>
													<ul class="list-inline">
														<li class="list-inline-item">
															<button type="submit" class="btn btn-secondary" id="btn-signup" name="signup" value="signup"><i class="la la-user-plus"></i> Signup</button>
														</li>
														<li class="list-inline-item">or use</li>
														<li class="list-inline-item">
															<button type="button" class="btn btn-secondary"><i class="la la-facebook"></i></button>
														</li>
														<li class="list-inline-item">
															<button type="button" class="btn btn-secondary"><i class="la la-google"></i></button>
														</li>
													</ul>
												</form>
											</div>
											<div class="tab-pane fade" id="pills-thankyou" role="tabpanel" aria-labelledby="pills-thankyou-tab">
													<h5 class="mb-3">
														Thank you for joining Fieldsight!
													</h5>
													<p>
														An email has been sent to <strong>{{ email }}</strong>
													</p>
													<p>
														Please click on the link in the email to activate your account.
													</p>
													<button type="button" id="btn-backtologin" class="btn btn-secondary"><i class="la la-long-arrow-left"></i> Back to Login</button>
												</div>
												<div class="tab-pane fade" id="pills-reset" role="tabpanel" aria-labelledby="pills-reset-tab">
													<form method="post" action="/accounts/password/reset/">
														{% csrf_token %}
														<div class="form-group">
													    	<label for="inputResetEmail">Email address</label>
													    	<input type="email" name="email" class="form-control" id="inputResetEmail">
													</div>
													<button type="submit" class="btn btn-secondary"><i class="la la-refresh"></i> Reset</button>
												</form>
											</div>
										</div>
		  							</div>
		  						</div>
		  					</div>
		  				</div>
		  			</div>
		  		</div>
		  	</div>
		</div>
		<!--<script src="//ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="assets/js/vendor/jquery-3.2.1.min.js"><\/script>')</script>-->
        <script>window.jQuery || document.write('<script src="{{ STATIC_URL }}dummy/assets/js/vendor/jquery-1.11.2.min.js"><\/script>')</script>
		<script src="{{ STATIC_URL }}dummy/assets/js/vendor/popper.min.js"></script>
        <script src="{{ STATIC_URL }}dummy/assets/js/vendor/bootstrap.min.js"></script>
        <script src="{{ STATIC_URL }}dummy/assets/js/plugins.js"></script>
		<script>

			
			$(document).ready(function(){
				vph = $(window).height();
				$(".login-wrap").css("min-height", vph);
				//Converting img tag to parent div bg
				var imgSrc = $(".login-bg>img").attr("src");
        		$('.login-bg').css({"background" : "url("+imgSrc+")", "background-position": "center", "background-size": "cover"});
        		$(".login-bg>img").remove();


        		//reset

				//VC
				fn_login_vertically_center();

				if('{{username}}'){
					document.getElementById('inputSignupUsername').value='{{username}}';
				}

				if('{{first_name}}'){
					document.getElementById('inputSignupFirstName').value='{{first_name}}';
				}

				if('{{last_name}}'){
					document.getElementById('inputSignupLastName').value='{{last_name}}';
				}

				if('{{email}}'){
					document.getElementById('inputSignupEmail').value='{{email}}';
				}

				if('{{login_username}}'){
					document.getElementById('inputEmail').value='{{login_username}}';
				}

				//after successful signup
				if('{{success_signup}}'=='1'){
					$('#pills-signup').removeClass('active show');
					$("#pills-signup-tab").removeClass('active');
					$('#pills-login').removeClass('active show');
					$('#pills-login-tab').removeClass('active');
					$('#pills-thankyou').addClass('active show');

					//
					var lHeight, rHeight;
					lHeight = $(".sec-left").outerHeight();
					$(".sec-right" ).css("min-height", lHeight);
				};

				if('{{signup_tab}}'=='1'){
					$('#pills-login').removeClass('active show');
					$('#pills-login-tab').removeClass('active');
					$('#pills-signup').addClass('active show');
					$("#pills-signup-tab").addClass('active');
					
					//
					var lHeight, rHeight;
					lHeight = $(".sec-left").outerHeight();
					$(".sec-right" ).css("min-height", lHeight);
				}
        		
			});
			jQuery(window).on('resize', function() {
				vph = $(window).height();
				$(".login-wrap").css("min-height", vph);
				fn_login_vertically_center();
			});

			// Vertical Center
			function fn_login_vertically_center(){
				var svph = $(window).height();
				var slfh = $(".login-section").height();
				if(svph > (slfh + 60)){
					var tempHeight = svph - slfh;
					var tempHeight = tempHeight / 2;
					$(".login-section").css("margin-top", tempHeight);
					$(".login-section").css("margin-bottom", tempHeight);
					}else{
					$(".login-section").css("margin-top", 30);
					$(".login-section").css("margin-bottom", 30);
				}
			}

			$("#help-me").click(function(){
			 	$('#pills-login').removeClass('active show');
			 	$('#pills-signup').removeClass('active show');
			 	$("#pills-login-tab").removeClass('active');
			 	$('#pills-reset').addClass('active show');

			 	//
			 	var lHeight, rHeight;
				lHeight = $(".sec-left").outerHeight();
				$(".sec-right" ).css("min-height", lHeight);
			});

			$("#btn-backtologin").click(function(){
			 	$('#pills-thankyou').removeClass('active show');
			 	$('#pills-login-tab').addClass('active');
			 	$('#pills-login').addClass('active show');

			 	//
			 	var lHeight, rHeight;
				lHeight = $(".sec-left").outerHeight();
				$(".sec-right" ).css("min-height", lHeight);
			});

			$("#btn-backtologinfromreset").click(function(){
			 	$('#pills-reset').removeClass('active show');
			 	$('#pills-login-tab').addClass('active');
			 	$('#pills-login').addClass('active show');

			 	//
			 	var lHeight, rHeight;
				lHeight = $(".sec-left").outerHeight();
				$(".sec-right" ).css("min-height", lHeight);
			});


			jQuery(document).on('ready', function() {
		        jQuery(window).on('resize', function() {
		            if(jQuery(document).width() > 479) {
		              

        		//Equal Height
        		function fn_login_eqheight(){
        			var lHeight, rHeight;
					lHeight = $(".sec-left").outerHeight();
					rHeight = $(".sec-right").outerHeight();
					$(".sec-left" ).css("min-height", rHeight);
        		}

        		fn_login_eqheight();
        		
				$('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
				  fn_login_eqheight();
				})
				
				//Background Scrolling Effect
				var lFollowX = 0,
			    lFollowY = 0,
			    x = 0,
			    y = 0,
			    friction = 1 / 30;

				function moveBackground() {
				  x += (lFollowX - x) * friction;
				  y += (lFollowY - y) * friction;
				  
				  translate = 'translate(' + x + 'px, ' + y + 'px) scale(1.1)';

				  $('.login-bg').css({
				    '-webit-transform': translate,
				    '-moz-transform': translate,
				    'transform': translate
				  });

				  window.requestAnimationFrame(moveBackground);
				}

				$(window).on('mousemove click', function(e) {

				  var lMouseX = Math.max(-100, Math.min(100, $(window).width() / 2 - e.clientX));
				  var lMouseY = Math.max(-100, Math.min(100, $(window).height() / 2 - e.clientY));
				  lFollowX = (20 * lMouseX) / 100; // 100 : 12 = lMouxeX : lFollow
				  lFollowY = (10 * lMouseY) / 100;

				});

				moveBackground();
		            }
		        }).trigger('resize'); // Trigger resize handlers.       
		    });
		</script>
    </body>
</html>
