{% extends "fieldsight/fieldsight_base.html" %}
{% load i18n staticfiles %}
{% load filters %}

{% block page-title %}{% trans 'Manage Forms' %}{% endblock %}

   {%block extracss %}
<link rel="stylesheet" href="{% static 'css/knockout-file-bindings.css' %}">
<link rel="stylesheet" href="{% static 'dummy/assets/css/jquery-ui.css' %}">
<style>
    #container {
    width:100%;
    height:100%;
    -webkit-transition:all .3s ease-in-out;
    -moz-transition:all .3s ease-in-out;
    -o-transition:all .3s ease-in-out;
    transition: all .3s ease-in-out;
}
    .item {
    background-color: #e2ebf9;
    cursor: move;
    /*text-align: center;*/
    margin: 20px;
    padding: 5px 5px 5px 30px;
    border: #9cbef1 1px solid;
}
.modal-backdrop.show{
    z-index: 0;
}
</style>

    {% endblock %}

{% block head %}
{% endblock %}
{%block kocript %}
<link rel="stylesheet" href="{% static 'css/toastr.css' %}">
<link rel="stylesheet" href="{% static 'css/datepicker.css' %}">
<script type="text/javascript" src="{{ STATIC_URL }}dummy/assets/js/vendor/jquery-ui.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/fieldsight/plugin/bootstrap-datepicker.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/fieldsight/plugin/toastr.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/fieldsight/knockout-file-bindings.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/fieldsight/plugin/knockout-sortable.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/jquery.blockUI.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/fieldsight/App.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/forms/setup.js?v=11.0"></script>

<script>

$(document).ready(function() {
var base_url = "{{request.get_host}}";
var is_project = "{{is_project}}";
var pk = "{{pk}}";

 vm = new SetUpViewModel(is_project, pk, base_url);
 ko.applyBindings(vm);
});

</script>
{% endblock %}

{% block content %}
<div id="main-content" class="padding">
    <nav aria-label="breadcrumb" role="navigation">
        <ol class="breadcrumb">
            {% block breadcrumbs %}
            {% if is_project == "0" %}
			<li class="breadcrumb-item"><a href="{% url 'fieldsight:site-dashboard' pk %}">{% trans 'Site Dashboard' %}</a></li>
            {% else %}
			<li class="breadcrumb-item"><a href="{% url 'fieldsight:project-dashboard' pk %}">{% trans 'Project Dashboard' %}</a></li>
            {% endif %}
			<li class="breadcrumb-item active" aria-current="page">{% trans 'Manage Forms' %}</li>
		    {% endblock %}
        </ol>
    </nav>

				<!-- Nav tabs -->
				<div class="tabbing">
					<ul class="nav nav-tabs" role="tablist">
						<li class="nav-item">
							<a class="nav-link active" data-toggle="tab" href="#tab001" role="tab">{% trans 'General Forms' %}</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" data-toggle="tab" href="#tab002" role="tab"
                            data-bind="click: function () {setSelectedVm('schedules')}">{% trans 'Scheduled Forms' %}</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" data-toggle="tab" href="#tab003" role="tab"
                            data-bind="click: function () {setSelectedVm('stages')}">{% trans 'Staged Forms' %}</a>
						</li>
                        <li class="nav-item" data-bind="visible:is_project=='1'">
							<a class="nav-link" data-toggle="tab" href="#tab004" role="tab"
                            data-bind="click: function () {setSelectedVm('survey')}">{% trans 'Survey Forms' %}</a>
						</li>
					</ul>
					<!-- Tab panes -->
					<div class="tab-content">
						<div class="tab-pane active" id="tab001" role="tabpanel">
                            <div data-bind="with:generalVm">
                            {% csrf_token %}
                                <!--Assign Form- OLD-->
                                     <div data-bind="with:current_form">
                                        <div class="modal" tabindex="-1" role="dialog" data-bind="modal:$parent.general_form_modal_visibility">
                                            <div class="modal-dialog small-modal" role="document">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                                    <h4 class="modal-title">{% trans 'Select Form' %}</h4>
                                                    </div>
                                                    <div class="modal-body">

                                                    <form method="post">
                                                    <div class="col-sm-12 registration_field">
                                                    {{ form.non_field_errors }}
                                                    </div>

                                                    {{form.as_p}}
                                                    <div class="gap"></div>
                                                    <button class="btn  btn-primary registration__action" type="submit" data-bind="click:save">{% trans 'Save' %}</button>
                                                    <div class="gap"></div>
                                                    </form>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
							<a href="#" title="" class="btn btn-sm btn-primary" data-bind="click:add_form">
                                <i class="la la-upload"></i>{% trans 'Assign New Form' %}</a>
														<!--Assign New-->
                                <div class="modal fade" id="assignModal" tabindex="-1" role="dialog" aria-labelledby="assignModalLabel" aria-hidden="true">
                                    <div class="modal-dialog model-lg" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h5 class="modal-title" id="assignModalLabel">{% trans 'Assign New Form' %}</h5>
                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                                </button>
                                            </div>
                                            <div class="modal-body">
                                                <div class="row">
                                                    <div class="col-md-6 col-sm-12">
                                                        <div class="widget-info margin-top">
                                                            <div class="widget-head">
                                                                <h4>{% trans 'My Forms' %}</h4>
                                                            </div>
                                                            <div class="widget-body">
                                                                <div class="input-group input-group-sm margin-top">
                                                                    <input type="text" class="form-control" placeholder="Search for..." aria-label="Search for...">
                                                                </div>
                                                                <div class="form-group margin-top">
                                                                    <label class="custom-control custom-radio">
                                                                      <input id="radio1" name="radio" type="radio" class="custom-control-input">
                                                                      <span class="custom-control-indicator"></span>
                                                                      <span class="custom-control-description">{% trans 'Form Name' %}</span>
                                                                    </label>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="custom-control custom-radio">
                                                                      <input id="radio2" name="radio" type="radio" class="custom-control-input">
                                                                      <span class="custom-control-indicator"></span>
                                                                      <span class="custom-control-description">{% trans 'Form Name' %}</span>
                                                                    </label>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="custom-control custom-radio">
                                                                      <input id="radio3" name="radio" type="radio" class="custom-control-input">
                                                                      <span class="custom-control-indicator"></span>
                                                                      <span class="custom-control-description">{% trans 'Form Name' %}</span>
                                                                    </label>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="custom-control custom-radio">
                                                                      <input id="radio4" name="radio" type="radio" class="custom-control-input">
                                                                      <span class="custom-control-indicator"></span>
                                                                      <span class="custom-control-description">{% trans 'Form Name' %}</span>
                                                                    </label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6 col-sm-12">
                                                        <div class="widget-info margin-top">
                                                            <div class="widget-head">
                                                                <h4>{% trans 'Library Forms' %}</h4>
                                                            </div>
                                                            <div class="widget-body margin-top">
                                                                <div class="input-group input-group-sm margin-top">
                                                                    <input type="text" class="form-control" placeholder="Search for..." aria-label="Search for...">
                                                                </div>
                                                                <div class="form-group margin-top">
                                                                    <label class="custom-control custom-radio">
                                                                      <input id="radio11" name="radio" type="radio" class="custom-control-input">
                                                                      <span class="custom-control-indicator"></span>
                                                                      <span class="custom-control-description">{% trans 'Form Name' %}</span>
                                                                    </label>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="custom-control custom-radio">
                                                                      <input id="radio12" name="radio" type="radio" class="custom-control-input">
                                                                      <span class="custom-control-indicator"></span>
                                                                      <span class="custom-control-description">{% trans 'Form Name' %}</span>
                                                                    </label>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="custom-control custom-radio">
                                                                      <input id="radio13" name="radio" type="radio" class="custom-control-input">
                                                                      <span class="custom-control-indicator"></span>
                                                                      <span class="custom-control-description">{% trans 'Form Name' %}</span>
                                                                    </label>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="custom-control custom-radio">
                                                                      <input id="radio14" name="radio" type="radio" class="custom-control-input">
                                                                      <span class="custom-control-indicator"></span>
                                                                      <span class="custom-control-description">{% trans 'Form Name' %}</span>
                                                                    </label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-primary"><i class="la la-upload"></i>{% trans 'Assign Form' %}</button>
                                                <a href="#" class="btn btn-secondary"><i class="la la-file-text"></i>{% trans 'New Form' %}</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <a class="btn btn-sm btn-primary" data-toggle="collapse" href="#searchForm" aria-expanded="false" aria-controls="searchForm"><i class="la la-search"></i>{% trans 'Search' %}</a>
                                <!--Search Form-->
                                <div class="collapse margin-top" id="searchForm">
                                    <form class="padding">
                                        <div class="row">
                                            <div class="col-md-6 ml-md-auto">
                                                <div class="input-group">
                                                  <input type="text" class="form-control" placeholder="Search for..." aria-label="Search for..."
                                                  data-bind="value:search_key, valueUpdate:'afterkeydown'">
                                                  <span class="input-group-btn">
                                                    <button class="btn btn-primary" type="button"><i class="la la-search"></i>{% trans 'Search' %}</button>
                                                  </span>
                                                </div>
                                            </div>
                                            <div class="col-md-3"></div>
                                        </div>
                                    </form>
                                </div>
                                <!--Form List-->
                                <table class="table table-responsive table-hover margin-top">
                                    <thead class="thead-default">
                                        <tr>
                                            <th>{% trans 'S.N.' %}</th>
                                            <th>{% trans 'Form Title' %}</th>
                                            <th>{% trans 'Assigned Date' %}</th>
                                            <th>{% trans 'Responses' %}</th>
                                            <th>{% trans 'Education Material' %}</th>
                                            <th>{% trans 'Actions' %}</th>
                                        </tr>
                                    </thead>
                                    <tbody data-bind="foreach: forms">
                                        <tr>
                                            <th scope="row" data-bind="text: $index()+1"></th>
                                            <td data-bind="text: name"></td>
                                            <td data-bind="text: date_created"></td>
                                            <td data-bind="text:responses_count"></td>
                                            <td><a href="javascript:void(0);" class="badge badge-info" title="Educational Material" data-bind="click:education_material"><i class="la la-book"></i>{% trans 'Materials' %}</a>
                                            <div class="modal" tabindex="-1" role="dialog" data-bind="modal:em_form_modal_visibility">
                                                    <div data-bind="with: em">
                                                      <div class="modal-dialog form-modal" role="document">
                                                        <div class="modal-content">
                                                          <div class="modal-header">
                                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                                            <h4 class="modal-title">{% trans 'Education Material' %}</h4>
                                                          </div>
                                                          <div class="modal-body">
                                                              <div class="col-sm-8">
                                                                  <h3>{% trans 'Create A Education Material' %}</h3>

                                                                <div class="form-group">
                                                                  <label for="title" id="sizing-addon2"><h4>{% trans 'Title' %}</h4></label>
                                                                  <textarea data-bind="value:title" placeholder="Title ....." class="form-control" rows="1" id="title"></textarea>
                                                                </div>
                                                                <div class="form-group">
                                                                  <label for="comment" id="sizing-addon2"><h4>{% trans 'Text' %}</h4></label>
                                                                  <textarea data-bind="value:text" placeholder="Text ...." class="form-control" rows="3" id="comment"></textarea>
                                                                </div>
                                                                <div>
                                                                  <div data-bind="visible:em_images().length">
                                                                      <p>{% trans 'Saved Images' %}</p>
                                                                      <div data-bind="foreach:em_images">
                                                                          <img style="height: 100px; margin: 5px;" class="img-rounded  thumb" data-bind="attr: { src: image }, visible: image">
                                                                      </div>
                                                                  </div>
                                                                  <h4>{% trans 'Multiple Images Uploads' %}</h4>
                                                                  <div class="well" data-bind="fileDrag: multiFileData">
                                                                            <div class="form-group row">
                                                                                <div class="col-md-6">
                                                                                          <!-- ko foreach: {data: multiFileData().dataURLArray, as: 'dataURL'} -->
                                                                                          <img style="height: 100px; margin: 5px;" class="img-rounded  thumb" data-bind="attr: { src: dataURL }, visible: dataURL">
                                                                                          <!-- /ko -->
                                                                                    <div data-bind="ifnot: multiFileData().fileArray">
                                                                                        <label class="drag-label">{% trans 'Drag files here' %}</label>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-md-6">
                                                                                    <input type="file" multiple data-bind="fileInput: multiFileData, customFileInput: {
                                                                                      buttonClass: 'btn btn-success',
                                                                                      fileNameClass: 'disabled form-control',
                                                                                      onClear: onClear,
                                                                                    }" accept="image/*">
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                 </div>
                                                              </div>

                                                              <div class="col-sm-4">
                                                                  <h4> {% trans 'Upload PDF OF Education Material' %}</h4>
                                                                  <div>
                                                                    <div class="well">
                                                                        <div class="form-group row">
                                                                            <div class="col-sm-12">
                                                                                <div data-bind="visible:pdf">
                                                                                    {% trans 'Current pdf' %}
                                                                                    <a data-bind="attr: {href: $root.base_url+pdf()}" target="_blank">{% trans 'View' %}</a>

                                                                                      <!--<button data-bind="click: addPdf">Load PDF</button>-->
                                                                                    <!--<div class="documentviewerpdf"></div>-->
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-sm-12">
                                                                                <span>{% trans 'Change PDf File' %}</span>
                                                                                <input type="file" id="pdf" data-bind="fileUpload: pdf" accept="application/pdf">
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                 </div>

                                                              </div>
                                                              <button class="btn btn-primary marg3" data-bind="click:$parent.save_em">{% trans 'Save' %}</button>
                                                          </div>
                                                        </div>
                                                      </div>
                                                    </div>
                                                  </div>
                                            </td>
                                            <td>
                                                <a href="javascript:void(0);" class="badge badge-success" data-bind="click:deploy, css:{ 'badge-danger': is_deployed()== true}">
                                               <i class="la la-close" data-bind="visible:is_deployed()==true"></i>
                                                <span data-bind="text: (is_deployed()== true) ? 'Undeploy' : 'Deploy'"></span></a>

                                            </td>
                                        </tr>

                                    </tbody>
                                </table>
                            </div>
						</div>
						<div class="tab-pane" id="tab002" role="tabpanel">
                            <div data-bind="with:scheduleVm">
                                {% csrf_token %}
                                <div data-bind="with:current_form">
                                <div class="modal" tabindex="-1" role="dialog" data-bind="modal:$parent.schedule_form_modal_visibility">
                                  <div class="modal-dialog form-modal" role="document">
                                    <div class="modal-content">
                                      <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                        <h4 class="modal-title">{% trans 'Create Schedule' %}</h4>
                                      </div>
                                      <div class="modal-body">

                                          <form method="post">
                                            <div class="col-sm-12 registration_field">
                                               {{ general_form.non_field_errors }}
                                               </div>

                                            {% csrf_token %}

                                              {{schedule_form.as_p}}
                                              <div class="form-group date1">
                                                  <label for="start">{% trans 'Start:' %}</label>
                                                  <input data-bind="datePicker : date_range_start" type="date" id="start">
                                              </div>
                                              <div class="form-group date2">
                                                  <label for="End"> {% trans 'End:' %}</label>
                                                  <input data-bind="datePicker : date_range_end" type="date" id="End">
                                              </div>
                                           <div class="form-group">
                                              <span style="font-weight: bold;">{% trans 'Days:' %}</span>
                                                <div data-bind="foreach: $parent.days">
                                                    <div class="col-sm-1" style="width: 14.28% !important">
                                                        <span data-bind="text:day"></span>
                                                    <input type="checkbox" class="day-schedule"
                                                           data-bind="checkedValue: id, checked: $parent.selected_days">
                                                        </div>
                                            </div>
                                            </div>

                                            <div class="gap-high"></div>
                                            <button class="btn g btn-primary registration__action" type="submit" data-bind="click:save">{% trans 'Create' %}</button>

                                            <div class="gap-medium"></div>


                                    </form>



                                      </div>
                                    </div>
                                  </div>
                                </div>
                                </div>

                                  <div data-bind="with:current_schedule">

    <div class="modal" tabindex="-1" role="dialog" data-bind="modal:$parent.schedule_form_edit_modal_visibility">
  <div class="modal-dialog form-modal" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">{% trans 'Modify Schedule' %}</h4>
      </div>
      <div class="modal-body">

          <form method="post">
            {% csrf_token %}

              <div class="form-group date1">
                  <label for="name">{% trans 'Schedule Name :' %}</label>
                  <input data-bind="text : name">
              </div><div class="form-group date1">
                  <label for="start">{% trans 'Start :' %}</label>
                  <input data-bind="text : date_range_start" type="date">
              </div>
              <div class="form-group date2">
                  <label for="End"> {% trans 'End:' %}</label>
                  <input data-bind="text : date_range_end" type="date">
              </div>
           <div class="form-group">
              <span style="font-weight: bold;">{% trans 'Days:' %}</span>
                <div data-bind="foreach: $parent.days">
                    <div class="col-sm-1" style="width: 14.28% !important">
                        <span data-bind="text:day"></span>
                    <input type="checkbox" class="day-schedule"
                           data-bind="checkedValue: id, checked: $parent.selected_days">
                        </div>
            </div>
            </div>

            <div class="gap-high"></div>
            <button class="btn g btn-primary registration__action" type="submit" data-bind="click:save_edit">{% trans 'Modify' %}</button>

            <div class="gap-medium"></div>


    </form>



      </div>
    </div>
  </div>
</div>

</div>
							<a href="#" title="" class="btn btn-sm btn-primary" data-bind="click:add_form"><i class="la la-upload"></i>{% trans 'Assign New Form' %}</a>
							<!--Assign Form-->
							<div class="modal fade" id="assignScheduleFormModal" tabindex="-1" role="dialog" aria-labelledby="assignScheduleFormModalLabel" aria-hidden="true">
								<div class="modal-dialog model-lg" role="document">
									<div class="modal-content">
										<div class="modal-header">
											<h5 class="modal-title" id="assignModalLabel">{% trans 'Assign New Form' %}</h5>
											<button type="button" class="close" data-dismiss="modal" aria-label="Close">
											<span aria-hidden="true">&times;</span>
											</button>
										</div>
										<div class="modal-body">
											<div class="row">
												<div class="col-md-6 col-sm-12">
													<div class="widget-info margin-top">
														<div class="widget-head">
															<h4>{% trans 'My Forms' %}</h4>
														</div>
														<div class="widget-body">
															<div class="input-group input-group-sm margin-top">
																<input type="text" class="form-control" placeholder="Search for..." aria-label="Search for...">
															</div>
															<div class="form-group margin-top">
																<label class="custom-control custom-radio">
																  <input id="radio1" name="radio" type="radio" class="custom-control-input">
																  <span class="custom-control-indicator"></span>
																  <span class="custom-control-description">{% trans 'Form Name' %}</span>
																</label>
															</div>
															<div class="form-group">
																<label class="custom-control custom-radio">
																  <input id="radio2" name="radio" type="radio" class="custom-control-input">
																  <span class="custom-control-indicator"></span>
																  <span class="custom-control-description">{% trans 'Form Name' %}</span>
																</label>
															</div>
															<div class="form-group">
																<label class="custom-control custom-radio">
																  <input id="radio3" name="radio" type="radio" class="custom-control-input">
																  <span class="custom-control-indicator"></span>
																  <span class="custom-control-description">{% trans 'Form Name' %}</span>
																</label>
															</div>
															<div class="form-group">
																<label class="custom-control custom-radio">
																  <input id="radio4" name="radio" type="radio" class="custom-control-input">
																  <span class="custom-control-indicator"></span>
																  <span class="custom-control-description">{% trans 'Form Name' %}</span>
																</label>
															</div>
														</div>
													</div>
												</div>
												<div class="col-md-6 col-sm-12">
													<div class="widget-info margin-top">
														<div class="widget-head">
															<h4>{% trans 'Library Forms' %}</h4>
														</div>
														<div class="widget-body margin-top">
															<div class="input-group input-group-sm margin-top">
																<input type="text" class="form-control" placeholder="Search for..." aria-label="Search for...">
															</div>
															<div class="form-group margin-top">
																<label class="custom-control custom-radio">
																  <input id="radio11" name="radio" type="radio" class="custom-control-input">
																  <span class="custom-control-indicator"></span>
																  <span class="custom-control-description">{% trans 'Form Name' %}</span>
																</label>
															</div>
															<div class="form-group">
																<label class="custom-control custom-radio">
																  <input id="radio12" name="radio" type="radio" class="custom-control-input">
																  <span class="custom-control-indicator"></span>
																  <span class="custom-control-description">{% trans 'Form Name' %}</span>
																</label>
															</div>
															<div class="form-group">
																<label class="custom-control custom-radio">
																  <input id="radio13" name="radio" type="radio" class="custom-control-input">
																  <span class="custom-control-indicator"></span>
																  <span class="custom-control-description">{% trans 'Form Name' %}</span>
																</label>
															</div>
															<div class="form-group">
																<label class="custom-control custom-radio">
																  <input id="radio14" name="radio" type="radio" class="custom-control-input">
																  <span class="custom-control-indicator"></span>
																  <span class="custom-control-description">{% trans 'Form Name' %}</span>
																</label>
															</div>
														</div>
													</div>
												</div>
											</div>
										</div>
										<div class="modal-footer">
											<button type="button" class="btn btn-primary"><i class="la la-upload"></i> {% trans 'Assign Form' %}</button>
											<a href="#" class="btn btn-secondary"><i class="la la-file-text"></i>{% trans ' New Form' %}</a>
										</div>
									</div>
								</div>
							</div>
							<a class="btn btn-sm btn-primary" data-toggle="collapse" href="#searchScheduledForm" aria-expanded="false" aria-controls="searchScheduledForm"><i class="la la-search"></i>{% trans 'Search' %}</a>
							<!--Search Form-->
							<div class="collapse margin-top" id="searchScheduledForm">
								<form class="padding">
									<div class="row">
										<div class="col-md-6 ml-md-auto">
											<div class="input-group">
											  <input type="text" class="form-control" placeholder="Search for..." aria-label="Search for..."
                                              data-bind="value:search_key, valueUpdate:'afterkeydown'">
											  <span class="input-group-btn">
												<button class="btn btn-primary" type="button"><i class="la la-search"></i> {% trans 'Search' %}</button>
											  </span>
											</div>
										</div>
										<div class="col-md-3"></div>
									</div>
								</form>
							</div>
							<!--Form List-->
							<table class="table table-responsive table-hover margin-top">
								<thead class="thead-default">
									<tr>
										<th>{% trans 'S.N.' %}</th>
										<th>{% trans 'Schedule Name' %}</th>
										<th>{% trans 'Form Title' %}</th>
										<th>{% trans 'Assigned Date' %}</th>
										<th>{% trans 'End Date' %}</th>
										<th>{% trans 'Days' %}</th>
										<th>{% trans 'Responses' %}</th>
										<th>{% trans 'Edu.. M' %}</th>
										<th>{% trans 'Actions' %}</th>
									</tr>
								</thead>
								<tbody data-bind="foreach: forms">
									<tr>
										<th scope="row" data-bind='text: $index()+1'></th>
										<td data-bind="text: name"></td>
										<td data-bind="text: form_name"></td>
										<td data-bind="text: date_range_start"></td>
										<td data-bind="text: date_range_end"></td>
										<td data-bind="text: days"></td>
										<td data-bind="text: responses_count"></td>
                                        <td><a href="javascript:void(0);" class="badge badge-info" title="Educational Material" data-bind="click:education_material"><i class="la la-book"></i>{% trans 'Materials' %}</a>
                                            <div class="modal" tabindex="-1" role="dialog" data-bind="modal:em_form_modal_visibility">
                        <div data-bind="with: em">
                          <div class="modal-dialog form-modal" role="document">
                            <div class="modal-content">
                              <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title">{% trans 'Education Material' %}</h4>
                              </div>
                              <div class="modal-body">
                                  <div class="col-sm-8">
                                      <h3>{% trans 'Create A Education Material' %}</h3>

                                    <div class="form-group">
                                      <label for="title" id="sizing-addon2"><h4>{% trans 'Title' %}</h4></label>
                                      <textarea data-bind="value:title" placeholder="Title ....." class="form-control" rows="1" id="title"></textarea>
                                    </div>





                                    <div class="form-group">
                                      <label for="comment" id="sizing-addon2"><h4>{% trans 'Text' %}</h4></label>
                                      <textarea data-bind="value:text" placeholder="Text ...." class="form-control" rows="3" id="comment"></textarea>
                                    </div>



                                  <div>
                                          <div data-bind="visible:em_images().length">
                                              <p>{% trans 'Saved Images' %}</p>
                                              <div data-bind="foreach:em_images">
                                                  <img style="height: 100px; margin: 5px;" class="img-rounded  thumb" data-bind="attr: { src: image }, visible: image">
                                              </div>
                                          </div>
                                        <h4>{% trans 'Multiple Images Uploads' %}</h4>
                                            <div class="well" data-bind="fileDrag: multiFileData">
                                                <div class="form-group row">
                                                    <div class="col-md-6">
                                                              <!-- ko foreach: {data: multiFileData().dataURLArray, as: 'dataURL'} -->
                                                              <img style="height: 100px; margin: 5px;" class="img-rounded  thumb" data-bind="attr: { src: dataURL }, visible: dataURL">
                                                              <!-- /ko -->
                                                        <div data-bind="ifnot: multiFileData().fileArray">
                                                            <label class="drag-label">{% trans 'Drag files here' %}</label>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <input type="file" multiple data-bind="fileInput: multiFileData, customFileInput: {
                                                          buttonClass: 'btn btn-success',
                                                          fileNameClass: 'disabled form-control',
                                                          onClear: onClear,
                                                        }" accept="image/*">
                                                    </div>
                                                </div>
                                            </div>
                                     </div>
                                      </div>

                                  <div class="col-sm-4">
                                      <h4> {% trans 'Upload PDF OF Education Material' %}</h4>
                                      <div>
                                        <div class="well">
                                            <div class="form-group row">
                                                <div class="col-sm-12">
                                                    <div data-bind="visible:pdf">
                                                        {% trans 'Current pdf' %}
                                                        <a data-bind="attr: {href: $root.base_url+pdf()}" target="_blank">{% trans 'View' %}</a>

                                              <!--<button data-bind="click: addPdf">Load PDF</button>-->
                                            <!--<div class="documentviewerpdf"></div>-->
                                          </div>
                                                    </div>
                                                <div class="col-sm-12">
                                                    <span>{% trans 'Change PDf File' %}</span>
                                                    <input type="file" id="pdf" data-bind="fileUpload: pdf" accept="application/pdf">
                                                </div>
                                            </div>
                                        </div>
                                     </div>

                                  </div>
                                  <button class="btn btn-primary marg3" data-bind="click:$parent.save_em">{% trans 'Save' %}</button>
                              </div>
                            </div>
                          </div>
                        </div>
                    </div>
                                        </td>
                                        <td>
                                            <a href="javascript:void(0);" role="button" class="badge badge-danger" data-bind="click:deploy, visible:is_deployed()== true">
                                                <i class="la la-close"></i> {% trans 'Undeploy ' %}</a>
                                            <a href="javascript:void(0);" role="button" class="badge badge-success" data-bind="click:deploy, visible:is_deployed()!= true">
                                                <i class="la la-rocket"></i> {% trans 'Deploy ' %}</a>

										</td>
									</tr>
								</tbody>
							</table>
                            </div>
						</div>
						<div class="tab-pane" id="tab003" role="tabpanel">
                            <div data-bind="with:stagesVm">
                                <a href="javascript:void(0);" title="" class="btn btn-sm btn-primary" data-bind="click:add_stage"><i class="la la-plus" aria-hidden="true"></i> {% trans 'Add Stage' %}</a>
                                <a href="javascript:void(0);" title="" class="btn btn-sm btn-primary" data-bind="click:reorder_stage"><i class="la la-reorder" aria-hidden="true"></i> {% trans 'Reorder Stages' %}</a>
                                <a href="javascript:void(0);" title="" class="btn btn-sm btn-success" data-bind="visible:stages().length > 0,
                                            click: deployStages"><i class="la la-rocket" aria-hidden="true"></i> {% trans 'Deploy to Mobile' %}</a>
                                {% csrf_token %}



                                <div class="modal" tabindex="-1" role="dialog" data-bind="modal:stage_order_modal_visibility">
                                        <div class="modal-dialog small-modal" role="document">
                                             <div class="modal-content">
                                                <div class="modal-header">
                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                                <h4 class="modal-title">{% trans 'Drag To change order of Stages' %}</h4>
                                                </div>
                                                <div class="modal-body">
                                                    <div class="container" style="margin:0px !important;"
                                                        data-bind="visible:stages().length > 0, sortable: {data: stages, afterMove: orderChanged}">
                                                        <div class="item">
                                                         <div class="row">
                                                            <div class="col-sm-12" style="padding: 8px 24px 8px 14px; font-size: 14px !important;">
                                                              <a class="stage-name-c">{% trans 'Stage' %} <span data-bind='text: $index()+1'></span>:</a>
                                                                  <a class="name-stage-grp" data-bind="text: name"></a>
                                                            </div>


                                                         </div>
                                                        </div>

                                                    </div>
                                                </div>
                                             </div>
                                         </div>
                                    </div>


                                <div class="modal" tabindex="-1" role="dialog" data-bind="modal:stage_form_modal_visibility">
                                    <div data-bind="with: current_stage">
                                              <div class="modal-dialog form-modal" role="document">
                                                <div class="modal-content">
                                                  <div class="modal-header">
                                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                                    <h4 class="modal-title">{% trans 'Stage Data' %}</h4>
                                                  </div>
                                                  <div class="modal-body">
                                                                <form method="post" class="">
                                                                    {% csrf_token %}
                                                                <div class="each-stage-grp">
                                                                 <div class="row">
                                                                    <div class="col-sm-12">
                                                                      <div class="form-group">
                                                                          <label for="stagename"><span class="stage-label">{% trans 'Stage Name:' %}</span></label>
                                                                          <input class="form-control"  id="stagename" data-bind="value: name" placeholder="Name Of Stage" required="required">
                                                                          </div>

                                                                          <div class="gap"></div>
                                                                    </div>

                                                                    <div class="col-sm-12">
                                                                    <div class="form-group">
                                                                          <label for="description"><span class="stage-label"fstage data>{% trans 'Description:' %}</span></label>
                                                                          <input class="form-control my-input" id="description" data-bind="value: description" placeholder="Description Of Stage">
                                                                    </div>
                                                                     </div>
                                                                   </div>
                                                                    <div class="row">
                                                                    <div class="all-sub-grp">
                                                                      <div class="container" data-bind="sortable: parent">
                                                                        <div class="item">
                                                                          <div class="col-sm-0"></div>
                                                                          <div class="col-sm-12" data-bind="visible:!editable()">
                                                                            <a class="sub-stage-name-c">{% trans 'Sub Stage' %}
                                                                                <span data-bind='text: $index()+1'></span>:
                                                                                <span class="name-stage-grp"  data-bind="text: name"></span></a>
                                                                                <a class="sub-stage-name-c"><i class="fa fa-file" aria-hidden="true"></i>
                                                                                <span class="name-stage-grp"  data-bind="text: stage_forms().xf().label"></span>
                                                                                    <a title="Edit Substage" data-bind="click:edit"><i class="fa fa-edit edit2"></i></a>
                                                                            </a>
                                                                          </div>
                                                                            <div class="col-sm-10" data-bind="visible:editable">
                                                                            <div class="sub-stage-name-c">{% trans 'Sub Stage' %}
                                                                                <span data-bind='text: $index()+1'></span><br>
                                                                                {% trans 'Name:' %}<input class="name-stage-grp substage"  data-bind="value: name" placeholder="Sub Stage Name"><br>
                                                                                {% trans 'Description:' %}<input class="name-stage-grp substage"  data-bind="value: description" placeholder="Sub Stage Description"><br>
                                                                                {% trans 'Form Assigned:' %}
                                                                                <select data-bind="options: $root.stagesVm().xforms, optionsText: 'title', optionsValue: 'id',
                                                                                    value: stage_forms().xf().id">
                                                                                </select>

                                                                                <br>

                                                                                <button   data-bind="click:edit_done" style="margin-left:33px;"><i class="fa fa-edit"></i>{% trans 'Done' %} </button>
                                                                                <button  data-bind="click:$parent.delete_substage" style="margin-left:33px;"><i class="fa fa-trash-o"></i>{% trans 'Delete' %} </button>
                                                                            </div>

                                                                          </div>
                                                                          <div class="col-md-3"></div>
                                                                          <div class="clearfixx"></div>
                                                                        </div>
                                                                      </div>
                                                                    </div>
                                                                    <div class="all-sub-grp">
                                                                      <div class="row" data-bind="with:newSubstage, visible:addSubStageMode()">
                                                                        <div class="each-sub-grp">
                                                                          <div class="col-sm-1"></div>
                                                                          <div class="col-sm-8">
                                                                              <form method="post">
                                                                                      <h5 class="sub-stage-name-c">{% trans 'New Sub Stage' %} <span data-bind='text: $parent.parent().length+1'></span></h5>
                                                                                        {% csrf_token %}
                                                                    <div>


                                                                    <div class="col-sm-12">
                                                                      <div class="form-group">
                                                                          <label for="stagename"><span class="stage-label">{% trans 'Name:' %}</span></label>
                                                                         <input class="form-control"  data-bind="value: name" placeholder="Name of SUb Stage ">

                                                                          <div class="gap"></div>
                                                                    </div>
                                                                    </div>

                                                                    <div class="col-sm-12">
                                                                      <div class="form-group">
                                                                          <label for="stagename"><span class="stage-label">{% trans 'Description:' %}</span></label>
                                                                         <input class="form-control"  data-bind="value: description" placeholder="Sub Stage Description">
                                                                          <div class="gap"></div>
                                                                    </div>
                                                                    </div>



                                                                     <div class="col-sm-12">
                                                                      <div class="form-group">
                                                                          <label for="stagename"><span class="stage-label">{% trans 'Form Assigned:' %}</span></label>
                                                                          <select class="form-control" data-bind="options: $root.stagesVm().xforms, optionsText: 'title', optionsValue: 'id',
                                                                                        value: stage_forms().xf().id">
                                                                                    </select>
                                                                          <div class="gap"></div>
                                                                    </div>
                                                                    </div>







                                                                                   <!--  {% trans 'Name: ' %}<input class="name-stage-grp substage"  data-bind="value: name" placeholder="Name of SUb Stage "><br> -->
                                                                                   <!--  {% trans 'Description: ' %}<input class="name-stage-grp substage"  data-bind="value: description" placeholder="Sub Stage Description"><br> -->
                                                                         <!--            {% trans 'Form Assigned: ' %}
                                                                                    <select data-bind="options: $root.stagesVm().xforms, optionsText: 'title', optionsValue: 'id',
                                                                                        value: stage_forms().xf().id">
                                                                                    </select>

                                                                                    <br> -->


                                                                                  </div>

                                                                            </form>
                                                                          </div>
                                                                          <div class="col-md-3"></div>
                                                                          <div class="clearfixx"></div>
                                                                        </div>
                                                                      </div>
                                                                    </div>
                                                                  </div>
                                                                  <div class="row">
                                                                  <div class="col-md-1"></div>
                                                                  <div class="col-sm-2">
                                                                      <a href="javascript:void(0);" class="badge badge-info"
                                                                         data-bind="click:save_sub_stage, visible:addSubStageMode()">
                                                                          <i class="fa fa-plus" aria-hidden="true"></i> {% trans 'Add' %}</a>

                                                                  </div>
                                                                     <div class="col-sm-8">
                                                                     </div>
                                                                  </div>
                                                                </div>

                                                                <br>

                                                            </form>
                                                             </div>


                                          <div class="modal-footer stage-footer">
                                               <div class="col-sm-3">
                                                <a href="javascript:void(0);" class="btn btn-primary"  data-bind="click: save">
                                                     <i class="la la-floppy-o" aria-hidden="true"></i>  {% trans 'Save' %}</a>
                                              </div>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                 </div>
                                <div id="accordion" role="tablist" data-bind="foreach:stages">
                                  <div class="card margin-bottom">
                                    <div class="card-header clearfix" role="tab" data-bind="attr: { id: 'heading_' + $index() }" >
                                        <div class="stage-name" data-toggle="collapse"
                                             aria-expanded="true"
                                             data-bind="attr: { 'aria-controls': 'prefix_' + $index(), href: '#prefix_' + $index() }">
                                            #<span data-bind="text:$index() +1"></span>
                                            <span data-bind="text:name"></span>
                                        </div>
                                        <div class="stage-action">
                                            <a href="javascript:void(0);" title="" class="btn btn-sm btn-primary" data-bind="click:edit"><i class="la la-edit"></i>{% trans 'Edit' %}</a>
                                            <div class="modal fade" id="stageOneEditModal" tabindex="-1" role="dialog" aria-labelledby="stageOneEditModalLabel" aria-hidden="true">
                                                <div class="modal-dialog" role="document">
                                                    <div class="modal-content">
                                                      <div class="modal-header">
                                                        <h5 class="modal-title" id="exampleModalLabel">{% trans 'Modal title' %}</h5>
                                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                          <span aria-hidden="true">&times;</span>
                                                        </button>
                                                      </div>
                                                      <div class="modal-body">
                                                        ...
                                                      </div>
                                                      <div class="modal-footer">
                                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">{% trans 'Close' %}</button>
                                                        <button type="button" class="btn btn-primary">{% trans 'Save changes' %}</button>
                                                      </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <a href="javascript:void(0);" title="Delete" data-bind="confirmClick: { message: ' Submissions data of this stage will be lost.\n Are you sure ?',
                              click: delete_stage }" class="btn btn-sm btn-warning"><i class="la la-close"></i>{% trans ' Delete' %}</a>
                                        </div>
                                    </div>

                                    <div data-bind="attr: { id: 'prefix_' + $index() }" class="collapse"
                                         role="tabpanel" data-bind="attr: { aria-labelledby: 'heading_' + $index() }" data-parent="#accordion">
                                      <div class="card-body">
                                        <div class="sub-stages margin-top">
                                            <h3><i class="la la-sitemap"></i>{% trans 'Sub Stages :' %}</h3>
                                            <ul data-bind="attr: { id: 'substages_' + $index() }, foreach:parent">

                                                <li class="clearfix">
                                                <br>
                                                    <div class="modal" tabindex="-1" role="dialog" data-bind="modal:em_form_modal_visibility">
                                                        <div data-bind="with: em">
                                                          <div class="modal-dialog form-modal" role="document">
                                                            <div class="modal-content">
                                                              <div class="modal-header">
                                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                                                <h4 class="modal-title">{% trans 'Education Materials' %}</h4>
                                                              </div>
                                                              <div class="modal-body">
                                                                  <div class="col-sm-8">
                                                                

                                                                    <div class="form-group">
                                                                      <label for="title" id="sizing-addon2"><h4>{% trans 'Title' %}</h4></label>
                                                                      <textarea data-bind="value:title" placeholder="Title ....." class="form-control" rows="1" id="title"></textarea>
                                                                    </div>





                                                                    <div class="form-group">
                                                                      <label for="comment" id="sizing-addon2"><h4>{% trans 'Text' %}</h4></label>
                                                                      <textarea data-bind="value:text" placeholder="Text ...." class="form-control" rows="3" id="comment"></textarea>
                                                                    </div>



                                                                  <div>
                                                                          <div data-bind="visible:em_images().length">
                                                                              <p>{% trans 'Saved Images' %}</p>
                                                                              <div data-bind="foreach:em_images">
                                                                                  <img style="height: 100px; margin: 5px;" class="img-rounded  thumb" data-bind="attr: { src: image }, visible: image">
                                                                              </div>
                                                                          </div>
                                                                        <h4>{% trans 'Multiple Images Uploads' %}</h4>
                                                                            <div class="well" data-bind="fileDrag: multiFileData">
                                                                                <div class="form-group row">
                                                                                    <div class="col-md-6">
                                                                                              <!-- ko foreach: {data: multiFileData().dataURLArray, as: 'dataURL'} -->
                                                                                              <img style="height: 100px; margin: 5px;" class="img-rounded  thumb" data-bind="attr: { src: dataURL }, visible: dataURL">
                                                                                              <!-- /ko -->
                                                                                        <div data-bind="ifnot: multiFileData().fileArray">
                                                                                            <label class="drag-label">{% trans 'Drag files here' %}</label>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="col-md-6">
                                                                                        <input type="file" multiple data-bind="fileInput: multiFileData, customFileInput: {
                                                                                          buttonClass: 'btn btn-success',
                                                                                          fileNameClass: 'disabled form-control',
                                                                                          onClear: onClear,
                                                                                        }" accept="image/*">
                                                                                        
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                     </div>
                                                                      </div>

                                                                  <div class="col-sm-4">
                                                                      <h4> {% trans 'Upload PDF OF Education Material' %}</h4>
                                                                      <div>
                                                                        <div class="well">
                                                                            <div class="form-group row">
                                                                                <div class="col-sm-12">
                                                                                    <div data-bind="visible:pdf">
                                                                                        {% trans 'Current pdf' %}
                                                                                        <a data-bind="attr: {href: pdf()}" target="_blank"> {% trans 'View' %} </a>

                                                                              <!--<button data-bind="click: addPdf">Load PDF</button>-->
                                                                            <!--<div class="documentviewerpdf"></div>-->
                                                                          </div>
                                                                                    </div>
                                                                                <div class="col-sm-12">
                                                                                    <span>{% trans 'Change PDf File' %}</span>
                                                                                    <input type="file" id="pdf" data-bind="fileUpload: pdf" accept="application/pdf">
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                     </div>

                                                                  </div>
                                                                  <button class="btn btn-primary marg3" data-bind="click:$parent.save_em">{% trans 'Save' %}</button>
                                                              </div>
                                                            </div>
                                                          </div>
                                                        </div>
                                                    </div>
                                                    <div class="substage-name" data-bind="visible:!editable()">

                                                        # <span data-bind="text:$parent.order()"></span> .<span data-bind="text:$index() +1"></span>
                                                        <span data-bind="text:name"></span>
                                                    </div>
                                                    <div class="substage-form-name" data-bind="visible:!editable()">
                                                        <strong>{% trans 'Form Name:' %}</strong> <span data-bind="text:stage_forms().xf().title()"></span>
                                                    </div>
                                                    <div class="substage-form-action" data-bind="visible:!editable()">
                                                        <a href="javascript:void(0);"  title="Edit Substage" class="badge badge-primary" data-bind="click:edit"><i class="la la-edit"></i>{% trans 'Edit' %}</a>

                                                        <a href="javascript:void(0);"  class="badge badge-success" title="Educational Material" data-bind="click:education_material"><i class="la la-book"></i> Materials</a>

                                                    </div>
                                    <div class="modal" tabindex="-1" role="dialog" data-bind="modal:edit_modal_visibility">
                                                        <div>
                                                          <div class="modal-dialog form-modal" role="document">
                                                            <div class="modal-content">
                                                              <div class="modal-header">
                                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                                                <h4 class="modal-title">{% trans 'Edit Substage' %}</h4>
                                                              </div>
                                                              <div class="modal-body">
                                                                  <div class="sub-stage-name-c">{% trans 'Sub Stage' %}
                                                            {% trans 'Name:' %}<input class="name-stage-grp substage"  data-bind="value: name" placeholder="Stage Name"><br>
                                                            {% trans 'Description:' %}<input class="name-stage-grp substage"  data-bind="value: description" placeholder="Stage Description"><br>
                                                            {% trans 'Form Assigned:' %}
                                                            <select data-bind="options: $root.stagesVm().xforms, optionsText: 'title', optionsValue: 'id', value:stage_forms().xf().id">
                                                            </select>

                                                            <br>

                                                            <button data-bind="click:edit_done" style="margin-left:33px;"><i class="fa fa-edit"></i>{% trans 'Close' %} </button>
                                                            <button data-bind="click:$parent.delete_substage" style="margin-left:33px;"><i class="fa fa-trash-o"></i>{% trans 'Delete' %} </button>
                                                        </div>
                                                              </div>
                                                            </div>
                                                          </div>
                                                        </div>
                                    </div>

                                                </li>
                                            </ul>
                                        </div>
                                     </div>
                                      <button type="button" class="btn btn-sm btn-primary margin-top"
                                              data-bind="confirmClick: { message: 'Any Changes on substage assigned form causes loss of previous Submissions data of that substage.\n Are you sure ?', click: save }">
                                          <i class="la la-save"></i> {% trans 'Save Changes' %}</button>

                                    </div>
                                  </div>
                                </div>
                            </div>

						</div>
                        <div class="tab-pane" id="tab004" role="tabpanel">
                            <div data-bind="with:surveyVm">
                            {% csrf_token %}
                                <!--Assign Form- OLD-->
                                <div data-bind="with:current_form">
                                    <div class="modal" tabindex="-1" role="dialog" data-bind="modal:$parent.general_form_modal_visibility">
                                        <div class="modal-dialog small-modal" role="document">
                                             <div class="modal-content">
                                                <div class="modal-header">
                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                                <h4 class="modal-title">{% trans 'Select Form' %}</h4>
                                                </div>
                                                <div class="modal-body">
                                                    <form method="post">
                                                        <div class="col-sm-12 registration_field">
                                                            {{ form.non_field_errors }}
                                                        </div>

                                                        {% csrf_token %}
                                                        {{form.as_p}}
                                                         <div class="gap"></div>
                                                        <button class="btn  btn-primary registration__action" type="submit" data-bind="click:save_survey">{% trans 'Save' %}</button>
                                                        <div class="gap"></div>
                                                     </form>
                                                </div>
                                             </div>
                                         </div>
                                    </div>
                            </div>
							<a href="#" title="" class="btn btn-sm btn-primary" data-bind="click:add_form">
                                <i class="la la-upload"></i>{% trans 'Assign New Form' %}</a>
														<!--Assign New-->
                                <div class="modal fade" id="assignModalSurvey" tabindex="-1" role="dialog" aria-labelledby="assignModalSurveyLabel" aria-hidden="true">
                                    <div class="modal-dialog model-lg" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h5 class="modal-title" id="assignModalSurveyLabel">{% trans 'Assign New Form' %}</h5>
                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                                </button>
                                            </div>
                                            <div class="modal-body">
                                                <div class="row">
                                                    <div class="col-md-6 col-sm-12">
                                                        <div class="widget-info margin-top">
                                                            <div class="widget-head">
                                                                <h4>{% trans 'My Forms' %}</h4>
                                                            </div>
                                                            <div class="widget-body">
                                                                <div class="input-group input-group-sm margin-top">
                                                                    <input type="text" class="form-control" placeholder="Search for..." aria-label="Search for...">
                                                                </div>
                                                                <div class="form-group margin-top">
                                                                    <label class="custom-control custom-radio">
                                                                      <input id="radio1" name="radio" type="radio" class="custom-control-input">
                                                                      <span class="custom-control-indicator"></span>
                                                                      <span class="custom-control-description">{% trans 'Form Name' %}</span>
                                                                    </label>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="custom-control custom-radio">
                                                                      <input id="radio2" name="radio" type="radio" class="custom-control-input">
                                                                      <span class="custom-control-indicator"></span>
                                                                      <span class="custom-control-description">{% trans 'Form Name' %}</span>
                                                                    </label>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="custom-control custom-radio">
                                                                      <input id="radio3" name="radio" type="radio" class="custom-control-input">
                                                                      <span class="custom-control-indicator"></span>
                                                                      <span class="custom-control-description">{% trans 'Form Name' %}</span>
                                                                    </label>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="custom-control custom-radio">
                                                                      <input id="radio4" name="radio" type="radio" class="custom-control-input">
                                                                      <span class="custom-control-indicator"></span>
                                                                      <span class="custom-control-description">{% trans 'Form Name' %}</span>
                                                                    </label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6 col-sm-12">
                                                        <div class="widget-info margin-top">
                                                            <div class="widget-head">
                                                                <h4>{% trans 'Library Forms' %}</h4>
                                                            </div>
                                                            <div class="widget-body margin-top">
                                                                <div class="input-group input-group-sm margin-top">
                                                                    <input type="text" class="form-control" placeholder="Search for..." aria-label="Search for...">
                                                                </div>
                                                                <div class="form-group margin-top">
                                                                    <label class="custom-control custom-radio">
                                                                      <input id="radio11" name="radio" type="radio" class="custom-control-input">
                                                                      <span class="custom-control-indicator"></span>
                                                                      <span class="custom-control-description">{% trans 'Form Name' %}</span>
                                                                    </label>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="custom-control custom-radio">
                                                                      <input id="radio12" name="radio" type="radio" class="custom-control-input">
                                                                      <span class="custom-control-indicator"></span>
                                                                      <span class="custom-control-description">{% trans 'Form Name' %}</span>
                                                                    </label>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="custom-control custom-radio">
                                                                      <input id="radio13" name="radio" type="radio" class="custom-control-input">
                                                                      <span class="custom-control-indicator"></span>
                                                                      <span class="custom-control-description">{% trans 'Form Name' %}</span>
                                                                    </label>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="custom-control custom-radio">
                                                                      <input id="radio14" name="radio" type="radio" class="custom-control-input">
                                                                      <span class="custom-control-indicator"></span>
                                                                      <span class="custom-control-description">{% trans 'Form Name' %}</span>
                                                                    </label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-primary"><i class="la la-upload"></i> {% trans 'Assign Form' %}</button>
                                                <a href="#" class="btn btn-secondary"><i class="la la-file-text"></i> {% trans 'New Form' %}</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <a class="btn btn-sm btn-primary" data-toggle="collapse" href="#searchFormS" aria-expanded="false" aria-controls="searchFormS"><i class="la la-search"></i> Search</a>
                                <!--Search Form-->
                                <div class="collapse margin-top" id="searchFormS">
                                    <form class="padding">
                                        <div class="row">
                                            <div class="col-md-6 ml-md-auto">
                                                <div class="input-group">
                                                  <input type="text" class="form-control" placeholder="Search for..." aria-label="Search for..."
                                                  data-bind="value:search_key, valueUpdate:'afterkeydown'">
                                                  <span class="input-group-btn">
                                                    <button class="btn btn-primary" type="button"><i class="la la-search"></i>{% trans ' Search' %}</button>
                                                  </span>
                                                </div>
                                            </div>
                                            <div class="col-md-3"></div>
                                        </div>
                                    </form>
                                </div>
                                <!--Form List-->
                                <table class="table table-responsive table-hover margin-top">
                                    <thead class="thead-default">
                                        <tr>
                                            <th>{% trans 'S.N.' %}</th>
                                            <th>{% trans 'Form Title' %}</th>
                                            <th>{% trans 'Assigned Date' %}</th>
                                            <th>{% trans 'Responses' %}</th>
                                            <th>{% trans 'Education Material' %}</th>
                                        </tr>
                                    </thead>
                                    <tbody data-bind="foreach: surveyForms">
                                        <tr>
                                            <th scope="row" data-bind='text: $index()+1'></th>
                                            <td data-bind="text: name"></td>
                                            <td data-bind="text: date_created"></td>
                                            <td data-bind="text: responses_count"></td>
                                            <td><a href="javascript:void(0);" class="badge badge-info" title="Educational Material" data-bind="click:education_material"><i class="la la-book"></i>{% trans 'Materials' %}</a>


                                            <div class="modal" tabindex="-1" role="dialog" data-bind="modal:em_form_modal_visibility">
                                                    <div data-bind="with: em">
                                                      <div class="modal-dialog form-modal" role="document">
                                                        <div class="modal-content">
                                                          <div class="modal-header">
                                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                                            <h4 class="modal-title">{% trans 'Education Material' %}</h4>
                                                          </div>
                                                          <div class="modal-body">
                                                              <div class="col-sm-8">
                                                                  <h3>{% trans 'Create A Education Material' %}</h3>

                                                                <div class="form-group">
                                                                  <label for="title" id="sizing-addon2"><h4>{% trans 'Title' %}</h4></label>
                                                                  <textarea data-bind="value:title" placeholder="Title ....." class="form-control" rows="1" id="title"></textarea>
                                                                </div>
                                                                <div class="form-group">
                                                                  <label for="comment" id="sizing-addon2"><h4>{% trans 'Text' %}</h4></label>
                                                                  <textarea data-bind="value:text" placeholder="Text ...." class="form-control" rows="3" id="comment"></textarea>
                                                                </div>
                                                                <div>
                                                                  <div data-bind="visible:em_images().length">
                                                                      <p>{% trans 'Saved Images' %}</p>
                                                                      <div data-bind="foreach:em_images">
                                                                          <img style="height: 100px; margin: 5px;" class="img-rounded  thumb" data-bind="attr: { src: image }, visible: image">
                                                                      </div>
                                                                  </div>
                                                                  <h4>{% trans 'Multiple Images Uploads' %}</h4>
                                                                  <div class="well" data-bind="fileDrag: multiFileData">
                                                                            <div class="form-group row">
                                                                                <div class="col-md-6">
                                                                                          <!-- ko foreach: {data: multiFileData().dataURLArray, as: 'dataURL'} -->
                                                                                          <img style="height: 100px; margin: 5px;" class="img-rounded  thumb" data-bind="attr: { src: dataURL }, visible: dataURL">
                                                                                          <!-- /ko -->
                                                                                    <div data-bind="ifnot: multiFileData().fileArray">
                                                                                        <label class="drag-label">{% trans 'Drag files here' %}</label>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-md-6">
                                                                                    <input type="file" multiple data-bind="fileInput: multiFileData, customFileInput: {
                                                                                      buttonClass: 'btn btn-success',
                                                                                      fileNameClass: 'disabled form-control',
                                                                                      onClear: onClear,
                                                                                    }" accept="image/*">
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                 </div>
                                                              </div>

                                                              <div class="col-sm-4">
                                                                  <h4>{% trans 'Upload PDF OF Education Material' %}</h4>
                                                                  <div>
                                                                    <div class="well">
                                                                        <div class="form-group row">
                                                                            <div class="col-sm-12">
                                                                                <div data-bind="visible:pdf">
                                                                                    {% trans 'Current pdf' %}
                                                                                    <a data-bind="attr: {href: $root.base_url+pdf()}" target="_blank">{% trans 'View' %} </a>

                                                                                      <!--<button data-bind="click: addPdf">Load PDF</button>-->
                                                                                    <!--<div class="documentviewerpdf"></div>-->
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-sm-12">
                                                                                <span>{% trans 'Change PDf File' %}</span>
                                                                                <input type="file" id="pdf" data-bind="fileUpload: pdf" accept="application/pdf">
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                 </div>

                                                              </div>
                                                              <button class="btn btn-primary marg3" data-bind="click:$parent.save_em">{% trans 'Save' %} </button>
                                                          </div>
                                                        </div>
                                                      </div>
                                                    </div>
                                                  </div>
                                            </td>
                                        </tr>

                                    </tbody>
                                </table>
                            </div>
						</div>
					</div>
				</div>
			</div>

{% endblock %}